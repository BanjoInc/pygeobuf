from geobuf import encode, decode

from jo.ban.proto.geo_buf_pb2 import Data

GEO = {
        "type":        "Polygon",
        "coordinates": [
            [[-122.786526, 45.398191], [-122.786523, 45.398193], [-122.786447, 45.395838], [-122.787735, 45.396258],
             [-122.787887, 45.394955], [-122.788342, 45.396258], [-122.788721, 45.39445], [-122.796678, 45.393735],
             [-122.796678, 45.394744], [-122.80418, 45.393104], [-122.803043, 45.390834], [-122.807438, 45.388395],
             [-122.807893, 45.389362], [-122.817214, 45.389488], [-122.81782, 45.384527], [-122.813804, 45.375193],
             [-122.811076, 45.376538], [-122.811455, 45.374436], [-122.809106, 45.373469], [-122.808954, 45.36897],
             [-122.800846, 45.369727], [-122.800543, 45.367961], [-122.799179, 45.367919], [-122.799179, 45.364303],
             [-122.790237, 45.364387], [-122.792131, 45.360771], [-122.795314, 45.359215], [-122.793192, 45.358416],
             [-122.795238, 45.353539], [-122.78372, 45.353707], [-122.784099, 45.352446], [-122.779855, 45.352446],
             [-122.779855, 45.353623], [-122.774626, 45.35438], [-122.77402, 45.353749], [-122.774854, 45.353581],
             [-122.775233, 45.349124], [-122.769777, 45.349166], [-122.768565, 45.351857], [-122.769777, 45.351857],
             [-122.769777, 45.353623], [-122.764397, 45.353707], [-122.762806, 45.358879], [-122.764473, 45.359341],
             [-122.759244, 45.360981], [-122.75932, 45.365017], [-122.755228, 45.37187], [-122.751363, 45.370651],
             [-122.73598, 45.374183], [-122.729311, 45.374099], [-122.730751, 45.376201], [-122.723931, 45.375234],
             [-122.72287, 45.376243], [-122.721885, 45.380826], [-122.722946, 45.382592], [-122.735525, 45.383811],
             [-122.750378, 45.387511], [-122.744013, 45.386922], [-122.744392, 45.388478], [-122.750075, 45.388352],
             [-122.745452, 45.391337], [-122.739087, 45.398905], [-122.739693, 45.400629], [-122.743937, 45.402605],
             [-122.745528, 45.397097], [-122.754243, 45.397097], [-122.754243, 45.393565], [-122.751667, 45.391253],
             [-122.753865, 45.391337], [-122.755229, 45.387637], [-122.750834, 45.388142], [-122.754471, 45.385577],
             [-122.757578, 45.386039], [-122.757048, 45.389865], [-122.762883, 45.389823], [-122.764399, 45.393439],
             [-122.768339, 45.393397], [-122.768491, 45.395205], [-122.773492, 45.393229], [-122.775311, 45.397013],
             [-122.779782, 45.397013], [-122.779706, 45.39222], [-122.780767, 45.39222], [-122.780691, 45.394575],
             [-122.78304, 45.394659], [-122.783798, 45.398611], [-122.785162, 45.398443], [-122.78448, 45.394659],
             [-122.785768, 45.394617], [-122.786526, 45.398191]],
            [[-122.773492, 45.353623], [-122.773492, 45.353623], [-122.772658, 45.353623], [-122.772658, 45.352866],
             [-122.77334, 45.352992], [-122.773492, 45.353623]],
            [[-122.774856, 45.349292], [-122.774856, 45.349292], [-122.774629, 45.35089], [-122.773113, 45.35089],
             [-122.773113, 45.34925], [-122.774856, 45.349292]],
            [[-122.774628, 45.351815], [-122.774628, 45.351815], [-122.774628, 45.352782], [-122.773719, 45.352782],
             [-122.773643, 45.351815], [-122.774628, 45.351815]],
            [[-122.775538, 45.357365], [-122.775538, 45.357365], [-122.775538, 45.357617], [-122.774704, 45.357617],
             [-122.774704, 45.357365], [-122.775538, 45.357365]],
            [[-122.778266, 45.359846], [-122.778266, 45.359846], [-122.778266, 45.360771], [-122.777205, 45.360477],
             [-122.777205, 45.360393], [-122.778266, 45.359846]],
            [[-122.780994, 45.35808], [-122.780995, 45.358081], [-122.777433, 45.358291], [-122.777281, 45.360099],
             [-122.777281, 45.358249], [-122.778493, 45.357744], [-122.777963, 45.356987], [-122.780994, 45.35808]],
            [[-122.785162, 45.393146], [-122.785163, 45.393146], [-122.783647, 45.393188], [-122.782889, 45.392557],
             [-122.785162, 45.392557], [-122.785162, 45.393146]],
            [[-122.787511, 45.364345], [-122.78751, 45.364344], [-122.78554, 45.364344], [-122.78501, 45.364849],
             [-122.78501, 45.363504], [-122.787511, 45.363504], [-122.787511, 45.364345]],
            [[-122.787586, 45.365648], [-122.787586, 45.365648], [-122.785085, 45.366741], [-122.78554, 45.364555],
             [-122.78751, 45.364513], [-122.787586, 45.365648]],
            [[-122.788344, 45.390119], [-122.788344, 45.390119], [-122.787662, 45.390119], [-122.787662, 45.389825],
             [-122.788344, 45.389825], [-122.788344, 45.390119]],
            [[-122.795089, 45.381247], [-122.795089, 45.381247], [-122.790239, 45.382466], [-122.790239, 45.377925],
             [-122.795089, 45.377883], [-122.795089, 45.381247]],
            [[-122.795089, 45.381541], [-122.795089, 45.381541], [-122.795089, 45.382466], [-122.791906, 45.382466],
             [-122.794104, 45.381835], [-122.795089, 45.381541]],
            [[-122.800393, 45.368886], [-122.800393, 45.368886], [-122.799863, 45.368886], [-122.799863, 45.368045],
             [-122.800393, 45.368045], [-122.800393, 45.368886]],
            [[-122.801909, 45.378724], [-122.801909, 45.378724], [-122.801833, 45.379271], [-122.801075, 45.379523],
             [-122.801075, 45.378766], [-122.801909, 45.378724]],
            [[-122.810699, 45.386755], [-122.810699, 45.386755], [-122.81032, 45.386839], [-122.810699, 45.386629],
             [-122.810699, 45.386755]],
            [[-122.814033, 45.38625], [-122.814033, 45.38625], [-122.81176, 45.386628], [-122.811684, 45.386292],
             [-122.814033, 45.385577], [-122.814033, 45.38625]],
            [[-122.817216, 45.385283], [-122.817215, 45.385282], [-122.816003, 45.385787], [-122.815776, 45.385114],
             [-122.817064, 45.384736], [-122.817216, 45.385283]]]
    }

def main():
    buf = encode(GEO)
    data = Data()
    data.ParseFromString(buf)
    print(data)
    print(decode(buf))



if __name__ == "__main__":
    main()
